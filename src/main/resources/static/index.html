<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Pessoas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        input, button {
            margin: 5px 0;
            padding: 5px;
        }
        .user {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
<h1>Gerenciamento de Pessoas</h1>

<!-- Cadastrar Pessoa -->
<h2>Cadastrar Pessoa</h2>
<form id="formCadastro">
    <input type="text" id="nome" placeholder="Nome" required>
    <input type="number" id="idade" placeholder="Idade" required>
    <input type="text" id="escola" placeholder="Escola" required>
    <input type="text" id="classe" placeholder="Classe" required>
    <button type="submit">Cadastrar</button>
</form>

<hr>

<!-- Listar Pessoas Ativas -->
<h2>Pessoas Ativas</h2>
<button onclick="listarPessoas()">Listar Pessoas</button>
<div id="listaPessoas"></div>

<hr>

<!-- Atualizar Pessoa -->
<h2>Atualizar Pessoa</h2>
<form id="formAtualizar">
    <input type="number" id="updateId" placeholder="ID" required>
    <input type="text" id="updateNome" placeholder="Nome">
    <input type="number" id="updateIdade" placeholder="Idade">
    <input type="text" id="updateEscola" placeholder="Escola">
    <input type="text" id="updateClasse" placeholder="Classe">
    <button type="submit">Atualizar</button>
</form>

<hr>

<!-- Deletar Pessoa -->
<h2>Deletar Pessoa</h2>
<form id="formDeletar">
    <input type="number" id="deleteId" placeholder="ID da Pessoa" required>
    <button type="submit">Deletar</button>
</form>

<hr>

<!-- Inativar Pessoa -->
<h2>Inativar Pessoa</h2>
<form id="formInativar">
    <input type="number" id="inativarId" placeholder="ID da Pessoa" required>
    <button type="submit">Inativar</button>
</form>

<hr>

<!-- Ativar Pessoa -->
<h2>Ativar Pessoa</h2>
<form id="formAtivar">
    <input type="number" id="ativarId" placeholder="ID da Pessoa" required>
    <button type="submit">Ativar</button>
</form>

<script>
    const baseUrl = 'http://localhost:8080'; // Altere para o URL correto da sua API

    // Cadastrar Pessoa
    document.getElementById('formCadastro').addEventListener('submit', async function(event) {
        event.preventDefault();
        const nome = document.getElementById('nome').value;
        const idade = document.getElementById('idade').value;
        const escola = document.getElementById('escola').value;
        const classe = document.getElementById('classe').value;

        const response = await fetch(`${baseUrl}/cadastrar`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                nome: nome,
                idade: idade,
                escola: escola,
                classe: classe
            })
        });

        if (response.status === 201) {
            alert('Pessoa cadastrada com sucesso!');
        } else {
            alert('Erro ao cadastrar pessoa.');
        }
    });

    // Listar Pessoas Ativas
    async function listarPessoas() {
        const response = await fetch(`${baseUrl}/listar`);
        const pessoas = await response.json();
        const listaDiv = document.getElementById('listaPessoas');
        listaDiv.innerHTML = '';

        pessoas.forEach(pessoa => {
            const pessoaDiv = document.createElement('div');
            pessoaDiv.classList.add('user');
            pessoaDiv.innerHTML = `ID: ${pessoa.id}, Nome: ${pessoa.nome}, Idade: ${pessoa.idade}, Escola: ${pessoa.escola}, Classe: ${pessoa.classe}`;
            listaDiv.appendChild(pessoaDiv);
        });
    }

    // Atualizar Pessoa
    document.getElementById('formAtualizar').addEventListener('submit', async function(event) {
        event.preventDefault();
        const id = document.getElementById('updateId').value;
        const nome = document.getElementById('updateNome').value;
        const idade = document.getElementById('updateIdade').value;
        const escola = document.getElementById('updateEscola').value;
        const classe = document.getElementById('updateClasse').value;

        const response = await fetch(`${baseUrl}/atualizar`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                id: id,
                nome: nome,
                idade: idade,
                escola: escola,
                classe: classe
            })
        });

        if (response.ok) {
            alert('Pessoa atualizada com sucesso!');
        } else {
            alert('Erro ao atualizar pessoa.');
        }
    });

    // Deletar Pessoa
    document.getElementById('formDeletar').addEventListener('submit', async function(event) {
        event.preventDefault();
        const id = document.getElementById('deleteId').value;

        const response = await fetch(`${baseUrl}/deletar/${id}`, {
            method: 'DELETE'
        });

        if (response.ok) {
            alert('Pessoa deletada com sucesso!');
        } else {
            alert('Erro ao deletar pessoa.');
        }
    });

    // Inativar Pessoa
    document.getElementById('formInativar').addEventListener('submit', async function(event) {
        event.preventDefault();
        const id = document.getElementById('inativarId').value;

        const response = await fetch(`${baseUrl}/inativar/${id}`, {
            method: 'DELETE'
        });

        if (response.ok) {
            alert('Pessoa inativada com sucesso!');
        } else {
            alert('Erro ao inativar pessoa.');
        }
    });

    // Ativar Pessoa
    document.getElementById('formAtivar').addEventListener('submit', async function(event) {
        event.preventDefault();
        const id = document.getElementById('ativarId').value;

        const response = await fetch(`${baseUrl}/ativar/${id}`, {
            method: 'PUT'
        });

        if (response.ok) {
            alert('Pessoa ativada com sucesso!');
        } else {
            alert('Erro ao ativar pessoa.');
        }
    });
</script>
</body>
</html>
